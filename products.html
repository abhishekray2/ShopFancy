<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <title>Products -ShopFancy</title>
  <script src="/assets/js/navbar.js" type="module" defer></script>
  <script src="/assets/js/homeProductCards.js" type="module" defer></script>
</head>

<body>
  <!-- Navbar will be injected by navbar.js -->

  <!-- ========== Start Extra Product Section ========== -->
  <section class="section-extra-product">
    <div class="container grid grid-three--cols">
      <div class="div-extra grid grid-two--cols">
        <div class="extra-text">
          <p>new year sale</p>
          <h3>get and extra 50% off</h3>
          <a href="#">Show now</a>
        </div>
        <div class="extra-img extra-laptop">
          <img src="./images/laptop.png" alt="" />
        </div>
      </div>

      <div class="div-extra grid grid-two--cols">
        <div class="extra-text">
          <p>new year sale</p>
          <h3>40% discount on speakers</h3>
          <a href="#">Show now</a>
        </div>
        <div class="extra-img">
          <img src="./images/headphoneEcom.png" alt="" />
        </div>
      </div>

      <div class="div-extra grid grid-two--cols">
        <div class="extra-text">
          <p>new year sale</p>
          <h3>get and extra 50% off</h3>
          <a href="#">Show now</a>
        </div>
        <div class="extra-img">
          <img src="./images/mobiles.png" alt="" />
        </div>
      </div>
    </div>
  </section>
  <!-- ========== End Extra Product Section ========== -->

  <!-- ========== Start policy ========== -->
  <section class="section-policy">
    <div class="container grid grid-four--cols">
      <div class="div-policy">
        <div class="icons">
          <i class="fa-solid fa-truck-fast"></i>
        </div>
        <div class="div-policy-text">
          <p>worldwide shipping</p>
          <p>order above $100</p>
        </div>
      </div>

      <div class="div-policy">
        <div class="icons">
          <i class="fa-solid fa-rotate"></i>
        </div>
        <div class="div-policy-text">
          <p>Easy 30 Day Returns</p>
          <p>Back Returns in 7 Days</p>
        </div>
      </div>

      <div class="div-policy">
        <div class="icons">
          <i class="fa-solid fa-hand-holding-dollar"></i>
        </div>
        <div class="div-policy-text">
          <p>money back guarantee</p>
          <p>guarantee with in 30-Days</p>
        </div>
      </div>

      <div class="div-policy">
        <div class="icons">
          <i class="fa-solid fa-headset"></i>
        </div>
        <div class="div-policy-text">
          <p>Easy Online Support</p>
          <p>24/7 Any time support</p>
        </div>
      </div>
    </div>
  </section>
  <!-- ========== End policy ========== -->

  <!-- ========== Start Our Products Section ========== -->
  <section class="section-products">
    <div class="container">
      <div class="products-header" data-aos="fade-up">
        <span class="section-subtitle">All Products</span>
        <h2 class="section-common--heading">Shop Our Collection</h2>
        <p class="section-description">Browse through our extensive collection of premium tech products</p>
      </div>

      <div class="products-filter" data-aos="fade-up" data-aos-delay="200">
        <button class="filter-btn active" data-category="all">All Products</button>
        <button class="filter-btn" data-category="computers">Computers</button>
        <button class="filter-btn" data-category="mobiles">Mobiles</button>
        <button class="filter-btn" data-category="audio">Audio</button>
        <button class="filter-btn" data-category="wearables">Wearables</button>
      </div>

      <div id="productContainer" class="products-grid" data-aos="fade-up" data-aos-delay="400"></div>
    </div>
  </section>

  <!-- ========== Start Product Template Section ========== -->
  <template id="productTemplate">
    <div class="product-card">
      <div class="product-badge"></div>
      <div class="product-thumb">
        <img class="productImage" src="" alt="" />
        <div class="product-actions">
          <button class="action-btn add-to-cart-button">
            <i class="fa-solid fa-cart-shopping"></i>
          </button>
          <button class="action-btn view-details-button">
            <i class="fa-solid fa-eye"></i>
          </button>
        </div>
      </div>
      <div class="product-details">
        <span class="category"></span>
        <h3 class="productName"></h3>
        <div class="productRating">
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
        </div>
        <p class="productDescription"></p>
        <div class="product-bottom">
          <div class="productPriceElement">
            <p class="productPrice"></p>
            <p class="productActualPrice"></p>
          </div>
          <div class="product-stock-info">
            <div class="productStockElement">
              <span class="stock-label">Stock:</span>
              <span class="productStock"></span>
            </div>
            <div class="productQuantityElement">
              <div class="quantity-controls">
                <button class="qty-btn cartDecrement">-</button>
                <span class="productQuantity">1</span>
                <button class="qty-btn cartIncrement">+</button>
              </div>
            </div>
          </div>
        </div>
        <div class="seller-info">
          <i class="fas fa-store"></i>
          <span class="sellerName"></span>
        </div>
      </div>
    </div>
  </template>
  <!-- ========== End Product Template Section ========== -->

  <!-- ========== End Our Products Section ========== -->

  <!--* ========== Start Footer Section ========== -->
  <footer class="section-footer">
    <script type="module" src="/assets/js/footer.js"></script>
  </footer>
  <!-- Include the footer JavaScript file -->
  <!--* ========== End Footer Section ========== -->

  <script type="module" src="/assets/js/main.js"></script>
</body>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const searchForm = document.querySelector(".search-form");
    const searchInput = document.querySelector(".search-input");

    searchForm.addEventListener("submit", function (event) {
      event.preventDefault(); // Prevent page reload

      const query = searchInput.value.trim();
      if (query !== "") {
        // Redirect to products.html with search query
        window.location.href = `products.html?search=${encodeURIComponent(query)}`;
      }
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const searchQuery = urlParams.get("search")?.toLowerCase().trim();
    const searchCategory = urlParams.get("category")?.toLowerCase().trim();
    const productContainer = document.getElementById("productContainer");

    // Update active category in filter buttons
    if (searchCategory) {
      document.querySelectorAll('.filter-btn').forEach(btn => {
        if (btn.getAttribute('data-category') === searchCategory) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });
    }

    if (searchQuery) {
      const keywords = searchQuery.split(" "); // Split search query into words
      let matchFound = false;

      const originalQuery = urlParams.get("search").trim(); // Keep original case
      document.title = `Search results for "${originalQuery}" - ShopFancy`;

      document.querySelectorAll('.product-card').forEach((card) => {
        const productName = card.querySelector(".productName").textContent.toLowerCase();
        const productDescription = card.querySelector(".productDescription").textContent.toLowerCase();
        const productCategory = card.querySelector(".category").textContent.toLowerCase();
        const productKeywords = card.getAttribute("data-keywords")?.toLowerCase() || "";

        // Check if category matches (if specified)
        const categoryMatch = !searchCategory || searchCategory === 'all' || productCategory === searchCategory;

        // Check if any search keyword matches name, description, or custom keywords
        const keywordMatch = keywords.some(keyword =>
          productName.includes(keyword) ||
          productDescription.includes(keyword) ||
          productKeywords.includes(keyword)
        );

        if (keywordMatch && categoryMatch) {
          card.style.display = "block"; // Show matching products
          matchFound = true;
        } else {
          card.style.display = "none"; // Hide non-matching products
        }
      });

      // If no matches found, show a message
      if (!matchFound) {
        const categoryText = searchCategory && searchCategory !== 'all' ? ` in ${searchCategory}` : '';
        productContainer.innerHTML = `
          <div class="no-results">
            <i class="fas fa-search"></i>
            <h3>No products found</h3>
            <p>We couldn't find any products matching "${originalQuery}"${categoryText}.</p>
            <a href="products.html" class="btn">View All Products</a>
          </div>
        `;
      }
    }
  });
</script>

</html>
